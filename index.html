<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>APS 3D Viewer</title>
  <style>
    body, html { margin: 0; padding: 0; height: 100%; }
    #forgeViewer { width: 100%; height: 100%; }
  </style>

  <!-- Forge Viewer CSS & JS -->
  <link rel="stylesheet" href="https://developer.api.autodesk.com/modelderivative/v2/viewers/style.min.css?v=v7.*">
  <script src="https://developer.api.autodesk.com/modelderivative/v2/viewers/viewer3D.min.js?v=v7.*"></script>
</head>
<body>
  <div id="forgeViewer"></div>

  <script>
    const options = {
      env: 'AutodeskProduction2', // EU region
      api: 'derivativeV2_EU',     // EU API
      getAccessToken: async (onTokenReady) => {
        // sementara pakai placeholder
        const accessToken = "eyJhbGciOiJSUzI1NiIsImtpZCI6IlZiakZvUzhQU3lYODQyMV95dndvRUdRdFJEa19SUzI1NiIsInBpLmF0bSI6ImFzc2MifQ.eyJzY29wZSI6WyJkYXRhOnJlYWQiLCJkYXRhOndyaXRlIiwiYnVja2V0OmNyZWF0ZSIsImJ1Y2tldDpyZWFkIl0sImNsaWVudF9pZCI6InZrQlhXWkxPQlBOOFRZMGNvNW1HTFBISXdMb0lLa0pOM1Zhclo2RWNFOHB1V01mcyIsImlzcyI6Imh0dHBzOi8vZGV2ZWxvcGVyLmFwaS5hdXRvZGVzay5jb20iLCJhdWQiOiJodHRwczovL2F1dG9kZXNrLmNvbSIsImp0aSI6IlVWN0k0a0dWeUhRRDdValo3OEtPQzBleVpwOWJGY1pFRXVyTFpMQWh5bmFNb3kzUlJ2Q3FBYWxlMlZuT2t0bzgiLCJleHAiOjE3NTc1NjE1NjN9.iJGgSab62m7XFa_nKxR_-EnVQH5wu8H-EeVOYI66pSTDbqMA7OEkXbJUOiSE_WlyFD0Lzb0by4TL-XzWPrp-Jeonuz_lZxakpPo467ijcR1RJqSr7kjkThHy04Z39TvXnxFvEtQ9Xs92vQkaKQ4zukAq7BGHWfKPYXyYLpRrN8gx2N__LlCxKuT34RsJ5Lf91r-1rjc8BxbyXi-G4doaE1c0rHfSgQy_wvNLoG4C00lW2gMWSN1A6_8-TyA0EVwP4oOQ3MvcyE-E__Fpxf7O77OsDo9ywJLPGUXdPVe07_GdyYe2lkbYc_FjzTo8Ozbuqe90V5fn-lJG8avPcuVH0A";
        const expireTimeSeconds = 3600;
        onTokenReady(accessToken, expireTimeSeconds);
      }
    };

    const documentId = 'urn:dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6bXlwbGFudDNkMjAyNTA5MDYvUENGJTIwV2VsZGluZy5ud2M'; // ganti dengan URN model kamu

    Autodesk.Viewing.Initializer(options, () => {
      const viewerDiv = document.getElementById('forgeViewer');
      const viewer = new Autodesk.Viewing.GuiViewer3D(viewerDiv);
      viewer.start();

      Autodesk.Viewing.Document.load(documentId,
        (doc) => {
          const defaultModel = doc.getRoot().getDefaultGeometry();
          viewer.loadDocumentNode(doc, defaultModel);
        },
        (errCode, errMsg) => {
          console.error("Error loading document:", errCode, errMsg);
        }
      );
    });
  </script>
</body>
</html>
