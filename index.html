<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>APS 3D Viewer</title>
  <style>
    body, html { margin: 0; padding: 0; height: 100%; }
    #forgeViewer { width: 100%; height: 100%; }
  </style>

  <!-- Forge Viewer CSS & JS -->
  <link rel="stylesheet" href="https://developer.api.autodesk.com/modelderivative/v2/viewers/style.min.css?v=v7.*">
  <script src="https://developer.api.autodesk.com/modelderivative/v2/viewers/viewer3D.min.js?v=v7.*"></script>
</head>
<body>
  <div id="forgeViewer"></div>

  <script>
    const options = {
      env: 'AutodeskProduction2', // EU region
      api: 'derivativeV2_EU',     // EU API
      getAccessToken: async (onTokenReady) => {
        // sementara pakai placeholder
        const accessToken = "eyJhbGciOiJSUzI1NiIsImtpZCI6IlZiakZvUzhQU3lYODQyMV95dndvRUdRdFJEa19SUzI1NiIsInBpLmF0bSI6ImFzc2MifQ.eyJzY29wZSI6WyJkYXRhOnJlYWQiLCJkYXRhOndyaXRlIiwiYnVja2V0OmNyZWF0ZSIsImJ1Y2tldDpyZWFkIl0sImNsaWVudF9pZCI6InZrQlhXWkxPQlBOOFRZMGNvNW1HTFBISXdMb0lLa0pOM1Zhclo2RWNFOHB1V01mcyIsImlzcyI6Imh0dHBzOi8vZGV2ZWxvcGVyLmFwaS5hdXRvZGVzay5jb20iLCJhdWQiOiJodHRwczovL2F1dG9kZXNrLmNvbSIsImp0aSI6IkdWdHhDWTF1cU9ENUM0WVA1TXdMN3VKZDV3WWs5dWtTRVdYV1RIeXJyVUxLVTRNemhFb1MwbUcxRjUwYWg5V0ciLCJleHAiOjE3NTgwMjA2NDZ9.GpbRCDkQekhSAWmsrJCwJk37Nu30QLz6eLF3xDCU7royBDohskpU1FYYvxd49y_xNTg47aOl9fSOe5OWglqaPVcrkjQ14ujyTxmYI7C1sHDo2IkCpQWZcLMCVAt3DoO8snZO3pYjPizQjvb-U1bql9hzsW2PzTdxXyvzq-fgohQ0N88VMRcQmfcLlwC6q6bFKF1E4tFlMky2XtBe5z5gF8g8P3jgcskRyR9yHzPk5CZx40bw_RYDSPa69O2HQbOjzatUpToe27qH3wcsy0K7NFzv0XNNiT4AhXMSAoJVFCXbSEBTYJfQKqpJ92c-hHuzeWLhWlb3h4b2iaWnQMfgrw";
        const expireTimeSeconds = 3600;
        onTokenReady(accessToken, expireTimeSeconds);
      }
    };

    const documentId = 'urn:dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6bXlwbGFudDNkMjAyNTA5MDYvOTcwMDAubndk'; // ganti dengan URN model kamu

    Autodesk.Viewing.Initializer(options, () => {
      const viewerDiv = document.getElementById('forgeViewer');
      const viewer = new Autodesk.Viewing.GuiViewer3D(viewerDiv);
      viewer.start();

      Autodesk.Viewing.Document.load(documentId,
        (doc) => {
          const defaultModel = doc.getRoot().getDefaultGeometry();
          viewer.loadDocumentNode(doc, defaultModel);
        },
        (errCode, errMsg) => {
          console.error("Error loading document:", errCode, errMsg);
        }
      );
    });
  </script>
</body>
</html>
